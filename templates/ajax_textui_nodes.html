{% load filters smartif %}

{% spaceless %}
    {% for tag in child_nodes %}
        <div id="tag-{{ tag.id }}" class="node {{ tag.node_type__name }} {% if not tag.score1 and tag.is_taxonomy_term %}node-taxonomy-term{% endif %} flyover { type:'{{ tag.node_type__name }}' }" data-tag-level="{{ tag.level }}" data-tag-id="{{ tag.id }}" data-tag-name="{{ tag.name|truncatechars:30 }}" data-tag-type="{% if tag.is_taxonomy_term %}Term{% elif tag.node_type__name == 'tag' %}Tag{% elif tag.node_type__name == 'tag_cluster' %}Cluster{% else %}{{ tag.node_type__name }}{% endif %}" data-tag-args="{% if tag.is_taxonomy_term %}_gaq.push(['_trackEvent', 'Terms', 'Click', '{{ tag.name }}']);{% elif tag.node_type__name == 'tag' %}_gaq.push(['_trackEvent', 'Tags', 'Click', '{{ tag.name }}']);{% elif tag.node_type__name == 'tag_cluster' %}_gaq.push(['_trackEvent', 'Cluster', 'Click', '{{ tag.name }}']);{% endif %}" data-cluster-args="{{ tag.id }}, {{ sector_id|reprjs }}, {{ society_id|reprjs}}">
            {% comment %}
            #if (!simplified) {
            #    // NOTE: Only show the separate color blocks if we're not using the simplified mode
            #    str += "      <td>";
            #    str += "        <div class=\"node-block-container\">";
            #    str += "          <div class=\"block-top " + tag.sectorLevel + "\">&nbsp;</div>";
            #    str += "          <div class=\"block-bottom " + tag.relatedTagLevel + "\">&nbsp;</div>";
            #    str += "        </div>";
            #    str += "      </td>";
            #}
            {% endcomment %}
        </div>
        <!--SPLIT-->
    {% endfor %}
{% endspaceless %}
