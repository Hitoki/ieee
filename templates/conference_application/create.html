{% extends "base_table.html" %}
{% load url from future %}

{% block extra_head %}
    <script type="text/javascript">

    $(function() {
        $("input#id_keywords_in").autoSuggest("{% url 'ajax_nodes_keywords' %}");
        $("#conf_app_create_form").on("submit", function () {
            var keywords_out_values = [];
            $('.as-selection-item').each(function () {
                // .substring(1) is used to remove symbol "Ã—" before text:
                keywords_out_values.push($(this).text().substring(1))
            });
            // this is last inputed value which wasn't processed by plugin:
            var keywords_in_value = $("input[name=keywords_in]").val();
            if (keywords_in_value) {  // add it to the result if it exists
                keywords_out_values.push(keywords_in_value);
            }
            // generating valid keywords result string for the backend
            $("input[name=keywords_out]").val(keywords_out_values.join("|"));
        })
    });

    </script>
{% endblock %}

{% block main_table_content %}
<div class="conf_app">
    <a href="{% url 'conference_applications' %}">Go to listing</a><br/>
    <h1>Create new conference application</h1>
    <form id="conf_app_create_form" method="post">{% csrf_token %}
        <div class="formRow first">
            {{ form.as_p }}
        </div>
        <div class="formRow">
            <label>Conference acronym:</label>
            <input type="text" disabled="disabled"/>
        </div>
        <div class="formRow">
            <label>Event type:</label>
            <select disabled="disabled">
                <option>Conference</option>
            </select>
        </div>
        <div class="formRow">
            <label>Conference URL:</label>
            <input type="text" disabled="disabled"/>
        </div>
        <div class="formRow">
            <label>Start date:*</label>
            <input type="text" disabled="disabled"/>
            <label class="short">End date:*</label>
            <input type="text" disabled="disabled"/>
        </div>
        <div class="formRow last">
            <label>Scope:*</label>
            <textarea disabled="disabled"></textarea>
        </div>
        <input type="submit" value="Create!">
    </form>
</div>
{% endblock %}
