<script type="text/javascript">    
    $(function() {
        var action;
        $('.subscribe').click(function(){
            if ($(this).hasClass('enabled')) {
                action = 'disable';
                $('.icon-alert').removeClass('enabled');
            } else {
                action = 'enable';
                $('.icon-alert').addClass('enabled');
            }
            $.post('/ajax/notification/request',
                {
                    email: '{{ user.email }}',
                    nodeid: {{ tag.id }},
                    action: action
                },
                function(){
                    return false;
                }
            );
        }).qtip();;
    });

    $(function() {
        var action;
        var nodeid;
        $('.favorite-topic').click(function(){
            nodeid = $(this).data('nodeid');
            if ($(this).hasClass('enabled')) {
                action = 'disable';
                $(this).removeClass('icon-star-whole enabled').addClass('icon-star');
                $(this).siblings('.icon-alert').addClass('hidden').removeClass('enabled');
            } else {
                action = 'enable';
                $(this).removeClass('icon-star').addClass('icon-star-whole enabled');
                $(this).siblings('.icon-alert').removeClass('hidden');
            }
            $.post('/ajax/favorite-topic/request',
                {
                    nodeid: nodeid,
                    action: action
                },
                function(){
                    return false;
                }
            );
        }).qtip();
    });
</script>