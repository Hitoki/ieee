<script type="text/javascript">    
    $(function() {
        var action;
        $('.subscribe').click(function(){
            if ($(this).hasClass('enabled')) {
                action = 'disable';
                $('.alertOff').hide();
                $('.alertOn').show();
                $('.tag-icons').children('.favorite-topic').removeClass('icon-star-whole-alert').addClass('icon-star-whole');
            } else {
                action = 'enable';
                $('.alertOn').hide();
                $('.alertOff').show();
                $('.tag-icons').children('.favorite-topic').removeClass('icon-star-whole').addClass('icon-star-whole-alert');
            }
            
        });

        $('input[type=radio][name=topicOpt]').change(function() {
            if (this.value == 'nofav') {
                action = 'disable';
                $('.tag-icons').children('.openAlerts').removeClass('enabled icon-star-whole icon-star-whole-alert').addClass('icon-star');
            }
            else if (this.value == 'fav') {
                action = 'enable';
                $('.tag-icons').children('.openAlerts').removeClass('icon-star icon-star-whole-alert').addClass('enabled icon-star-whole');
            }
            else if (this.value == 'favalert') {
                action = 'enable';
                $('.tag-icons').children('.openAlerts').removeClass('icon-star-whole icon-star').addClass('enabled icon-star-whole-alert');
            }
            
        });

    });

    $(function() {
        var action;
        var nodeid;
        $('.favorite-topic').click(function(){
            $('.qtip').qtip('hide');
            nodeid = $(this).data('nodeid');
            if ($(this).hasClass('enabled')) {
                action = 'disable';
                $(this).parent().removeClass('is-favorite');
                $(this).removeClass('icon-star-whole enabled').addClass('icon-star');
                $(this).siblings('.alertMenu').children('.alertOn').hide();
                $(this).siblings('.alertMenu').children('.alertOff').show();
            } else {
                action = 'enable';
                $(this).parent().addClass('is-favorite');
                $(this).removeClass('icon-star').addClass('icon-star-whole enabled');
                $(this).siblings('.alertMenu').children('.alertOff').hide();
                $(this).siblings('.alertMenu').children('.alertOn').show();
            }
            $.post('/ajax/favorite-topic/request',
                {
                    nodeid: nodeid,
                    action: action
                },
                function(){
                    return false;
                }
            );
        });
    });

    $(function() {
        var action;
        var nodeid;
        $('.over-favorite-resource').on('click', function(){
            $('.qtip').qtip('hide');
            nodeid = $(this).data('nodeid');
            if ($(this).hasClass('enabled')) {
                action = 'disable';
                $('span[data-nodeid=' + nodeid + ']').removeClass('icon-star-whole enabled').addClass('icon-star');
            } else {
                action = 'enable';
                $('span[data-nodeid=' + nodeid + ']').removeClass('icon-star').addClass('icon-star-whole enabled');
            }
            $.post('/ajax/favorite-resource/request',
                {
                    nodeid: nodeid,
                    action: action,
                },
                function(){
                    return false;
                }
            );
        });
        $('.drive').qtip();
        $('.icon-star').qtip();
        $('.icon-star-whole').qtip();
        $('.icon-star-whole-alert').qtip();
    });

    $(function() {
        $('.no-enable-alert').click(function() {
            $(this).parent().parent().hide();
        });
    });
</script>