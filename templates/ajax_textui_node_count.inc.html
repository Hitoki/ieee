{% load humanize %}
{% if search_for %}
    {# For search phrases #}
    {% if search_for_too_short %}
        <a href="javascript:void(0)" onclick="$('#textui-tags-search-clear').click()">Clear the filter phrase now</a>.
    {% else %}
        {# If the view returned results summary, use it. If not (happens when "All Sectors" or "All Organizations" are chosen), construct one. #}
        <p id="tag-and-cluster-counts">
            {% if NEWUI %}
            <span aria-hidden="true" class="icon-tag"></span> {{ num_tags|intcomma }} topic{{ num_tags|pluralize }}
            {% if num_terms %} (<span aria-hidden="true" class="icon-tag"></span> {{ num_terms|intcomma }} terms){% endif %}
            {% if num_clusters %} &amp; <span aria-hidden="true" class="icon-tags"></span> {{ num_clusters|intcomma }} topic area{{ num_clusters|pluralize }}{% endif %}
            {% if cluster %} in the <span aria-hidden="true" class="icon-tags"></span> topic area "{{ cluster.name }}" <a href="javascript:Tags.selectSociety('all',null,1);" class="filter-clear"></a></span>{% endif %}
            {% if sector %} in the industry sector "{{ sector }}"{% endif %}
            {% if society %} in the {% if NEWUI %}<span aria-hidden="true" class="icon-users"></span>{% else %}<span class="orgIcon-sm"></span>{% endif %} organization "{{ society }}" <a href="javascript:Tags.selectSociety('all');" class="filter-clear"></a>{% endif %}
            
            {% else %}
            Showing{% if num_clusters %} {% if NEWUI %}<span aria-hidden="true" class="icon-tags"></span>{% else %}<span class="icon_cluster_sm cluster-icon"></span>{% endif %} {{ num_clusters|intcomma }} topic area{{ num_clusters|pluralize }}{% if num_clusters %} &amp; {% else %}&#47;{% endif %}{% endif %} <span class="tag_icon tag-icon"></span> {{ num_tags|intcomma }} topic{{ num_tags|pluralize }}{% if num_terms %} (<span class="tag_icon tag-icon"></span> {{ num_terms|intcomma }} terms){% endif %}{% if cluster %} in the {% if NEWUI %}<span aria-hidden="true" class="icon-tags"></span>{% else %}<span class="icon_cluster_sm cluster-icon"></span>{% endif %} topic area "{{ cluster.name }}" <a href="javascript:Tags.selectSociety('all',null,1);" class="filter-clear"></a>{% endif %}{% if sector %} in the industry sector "{{ sector }}"{% endif %}{% if society %} in the {% if NEWUI %}<span aria-hidden="true" class="icon-users"></span>{% else %}<span class="orgIcon-sm"></span>{% endif %} organization "{{ society }}" <a href="javascript:Tags.selectSociety('all');" class="filter-clear"></a>{% endif %}:
            {% endif %}
        </p>    
    {% endif %}
{% else %}
    {# For non-search-phrases #}
    <p id="tag-and-cluster-counts">
        {% if NEWUI %}
        <span aria-hidden="true" class="icon-tag"></span> {{ num_tags|intcomma }} topic{{ num_tags|pluralize }}
        {% if num_terms %} (<span aria-hidden="true" class="icon-tag"></span> {{ num_terms|intcomma }} terms){% endif %}
        {% if num_clusters %} &amp; <span aria-hidden="true" class="icon-tags"></span> {{ num_clusters|intcomma }} topic area{{ num_clusters|pluralize }}{% endif %}
        {% if cluster %} in the <span aria-hidden="true" class="icon-tags"></span> topic area "{{ cluster.name }}" <a href="javascript:Tags.selectSociety('all',null,1);" class="filter-clear"></a></span>{% endif %}
        {% if sector %} in the industry sector "{{ sector }}"{% endif %}
        {% if society %} in the {% if NEWUI %}<span aria-hidden="true" class="icon-users"></span>{% else %}<span class="orgIcon-sm"></span>{% endif %} organization "{{ society }}" <a href="javascript:Tags.selectSociety('all');" class="filter-clear"></a>{% endif %}
        
        {% else %}
        Showing{% if num_clusters %} {% if NEWUI %}<span aria-hidden="true" class="icon-tags"></span>{% else %}<span class="icon_cluster_sm cluster-icon"></span>{% endif %} {{ num_clusters|intcomma }} topic area{{ num_clusters|pluralize }}{% if num_clusters %} &amp; {% else %}&#47;{% endif %}{% endif %} <span class="tag_icon tag-icon"></span> {{ num_tags|intcomma }} topic{{ num_tags|pluralize }}{% if num_terms %} (<span class="tag_icon tag-icon"></span> {{ num_terms|intcomma }} terms){% endif %}{% if cluster %} in the {% if NEWUI %}<span aria-hidden="true" class="icon-tags"></span>{% else %}<span class="icon_cluster_sm cluster-icon"></span>{% endif %} topic area "{{ cluster.name }}" <a href="javascript:Tags.selectSociety('all',null,1);" class="filter-clear"></a>{% endif %}{% if sector %} in the industry sector "{{ sector }}"{% endif %}{% if society %} in the {% if NEWUI %}<span aria-hidden="true" class="icon-users"></span>{% else %}<span class="orgIcon-sm"></span>{% endif %} organization "{{ society }}" <a href="javascript:Tags.selectSociety('all');" class="filter-clear"></a>{% endif %}:
        {% endif %}
    </p>
{% endif %}
